<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="./style_account_payment.css">
    <title>Account Payment</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 20px;
    }

    h1 {
        color: #333;
        text-align: center;
    }

    form {
        background-color: #fff;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        max-width: 400px;
        margin: auto;
    }

    p {
        margin: 15px 0;
    }

    label {
        display: block;
        margin-bottom: 5px;
        color: #666;
    }

    input[type="text"],
    input[type="date"],
    input[type="password"]{
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
        font-size: 16px;
    }
    input[id="captchaDiv"]{
        display: flex;
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
        font-size: 16px;
    }

    input[type="submit"],
    input[type="reset"] {
        width: 48%;
        padding: 10px;
        border: none;
        border-radius: 4px;
        margin-top: 10px;
        cursor: pointer;
        font-size: 16px;
    }

    input[type="submit"] {
        background-color: #28a745;
        color: white;
    }

    input[type="reset"] {
        background-color: #dc3545;
        color: white;
    }

    input[type="submit"]:hover {
        background-color: #218838;
    }

    input[type="reset"]:hover {
        background-color: #c82333;
    }
</style>
</head>
<body>
<h1>Account Payment</h1>
<form action="#" th:action="@{/v1/customers/payment/account(customerId=${customerId}, offerId=${offerId})}" th:object="${cardDto}" method="post">
    <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
    <p>
        <label for="cardNumber">Card Number:</label>
        <input type="text" id="cardNumber" th:field="*{cardNumber}" required />
    </p>
    <p>
        <label for="localDate">Local Date:</label>
        <input type="date" id="localDate" th:field="*{localDate}" required />
    </p>
    <p id = "captchaDiv">
        <img id="captchaImage"  th:attr="src=${'data:image/png;base64,' + imageCaptchaSrc}" alt="Captcha Image" />
        <input type="text" id="captcha" th:field="*{captcha}" required />
<!--        <button type="button" onclick="reloadCaptcha()">Reload Captcha</button>-->
    </p>
    <p>
        <label for="bankName">Bank Name:</label>
        <input type="text" id="bankName" th:field="*{bankName}" required />
    </p>
    <p>
        <label for="ccv2">CCV2:</label>
        <input type="text" id="ccv2" th:field="*{ccv2}" required />
    </p>
    <p>
        <label for="secondPassword">Second Password:</label>
        <input type="password" id="secondPassword" th:field="*{secondPassword}" required />
    </p>
    <p>
        <input type="submit" value="Submit" />
        <input type="reset" value="Reset" />
    </p>
</form>
<script>
    function reloadCaptcha() {
        fetch('/captcha')
            .then(response => response.text())
            .then(data => {
                document.getElementById('captchaImage').src = data;
            })
            .catch(err => console.error('Failed to reload captcha:', err));
    }
</script>
</body>
</html>